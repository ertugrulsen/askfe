{"remainingRequest":"C:\\Users\\ErtugrulSen\\Desktop\\visual Studio Project\\AskDefinexFrontEnd\\askdefinex-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ErtugrulSen\\Desktop\\visual Studio Project\\AskDefinexFrontEnd\\askdefinex-ui\\src\\components\\comments\\comments.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\ErtugrulSen\\Desktop\\visual Studio Project\\AskDefinexFrontEnd\\askdefinex-ui\\src\\components\\comments\\comments.vue","mtime":1615592727930},{"path":"C:\\Users\\ErtugrulSen\\Desktop\\visual Studio Project\\AskDefinexFrontEnd\\askdefinex-ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ErtugrulSen\\Desktop\\visual Studio Project\\AskDefinexFrontEnd\\askdefinex-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\ErtugrulSen\\Desktop\\visual Studio Project\\AskDefinexFrontEnd\\askdefinex-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\ErtugrulSen\\Desktop\\visual Studio Project\\AskDefinexFrontEnd\\askdefinex-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ErtugrulSen\\Desktop\\visual Studio Project\\AskDefinexFrontEnd\\askdefinex-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5jb21tZW50LWNvbnRlbnR7DQogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjYTRhNGE0Ow0KICBwYWRkaW5nLXRvcDogMHB4Ow0KICBwYWRkaW5nLWJvdHRvbTogMHB4Ow0KICBtYXJnaW4tYm90dG9tOiA1cHg7DQp9DQouY29tbWVudC1pY29uew0KICBmb250LXNpemU6IDE2cHg7DQogIHBhZGRpbmctcmlnaHQ6IDZweDsNCiAgcGFkZGluZy1ib3R0b206IDJweDsNCiAgcGFkZGluZy10b3A6IDJweDsNCn0NCi5jb21tZW50LXVwZGF0ZXsNCiAgY3Vyc29yOiBwb2ludGVyOw0KfQ0KLmNvbW1lbnQtdXBkYXRlLWRlbGV0ZS1hcmVhew0KICBkaXNwbGF5OiBmbG93LXJvb3Q7DQp9DQouY29tbWVudElucHV0Zm9yVXBkYXRlew0KICBmb250LXNpemU6IDEycHg7DQogIGhlaWdodDogMjVweDsNCn0NCg=="},{"version":3,"sources":["comments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"comments.vue","sourceRoot":"src/components/comments","sourcesContent":["<template>\r\n  <v-list class=\"pl-3 pr-3\">\r\n    <v-list-item  v-for=\"comment in comments\" :key=\"parseInt(comment.Id)\" >\r\n      <v-list-item-content class=\"comment-content text--disabled px-0\">\r\n        <v-list-item-title v-if=\"selectedCommentId != comment.Id\" v-text=\"comment.Comment\"></v-list-item-title>\r\n        <dxFormTextInput v-if=\"selectedCommentId == comment.Id\" class=\"commentInput\" id=\"updateCommentInput\" ref=\"commentsRef\" :clear=\"true\" :isRequired=true />\r\n        <v-list-item-subtitle v-if=\"selectedCommentId != comment.Id\" class=\"comment-subtitle text-right\"><span class=\"primary--text\">{{comment.CreateUser }}</span> {{comment.CreateDate ?', '+ comment.CreateDate:''}}</v-list-item-subtitle>                                        \r\n      </v-list-item-content>              \r\n      <v-list-item-action class=\"comment-update-delete-area\">         \r\n              <v-icon small @click=\"deleteComment(comment.Id)\" v-if=\"isUpdateable(comment)&& selectedCommentId != comment.Id\" class=\"comment-icon px-2 comment-update\">mdi-minus-circle</v-icon>\r\n              <v-icon small @click=\"selectedCommentId = comment.Id\" v-if=\"isUpdateable(comment) && selectedCommentId != comment.Id\" class=\"comment-icon px-2 comment-update\">fas fa-pencil-alt</v-icon>\r\n              <v-icon small @click=\"selectedCommentId=-1\" v-if=\"isUpdateable(comment) && selectedCommentId == comment.Id\" class=\"comment-icon px-2 comment-update\">mdi-cancel</v-icon>\r\n              <v-icon small @click=\"updateComment(comment)\" v-if=\"isUpdateable(comment) && selectedCommentId == comment.Id\" class=\"comment-icon px-2 comment-update\"> mdi-checkbox-marked-circle</v-icon>\r\n        </v-list-item-action>      \r\n    </v-list-item>\r\n    <v-list-item >\r\n      <v-list-item-content >\r\n        <v-row >\r\n          <v-col v-if=\"input\" cols=\"12\" >\r\n            <v-form  ref=\"form\" v-model=\"valid\" lazy-validation>\r\n              <dxFormTextInput  id=\"commentInput\" ref=\"commentsRef\" v-model=\"newComment\" placeholder=\"your_comment\" :clear=\"true\" :isRequired=true />\r\n            </v-form>\r\n          </v-col>\r\n          <v-col cols=\"12\"  class=\"text-right\">\r\n            <v-btn x-small outlined  color=\"blue darken-2\"  v-if=\"!input\" @click=\"input = !input\" >\r\n              <v-icon small  class=\"comment-icon\">fas fa-pencil-alt</v-icon> Add comment\r\n            </v-btn>\r\n            <v-btn x-small outlined color=\"blue-grey\"  class=\"mx-2 white--text\" v-if=\"input\" @click=\"input = !input\" >\r\n              <v-icon small  class=\"comment-icon\">fas fa-times</v-icon>  Cancel \r\n            </v-btn>\r\n            <v-btn x-small outlined color=\"success\" v-if=\"input\" @click=\"save\">\r\n              <v-icon small  class=\"comment-icon\" >fas fa-plus-circle</v-icon>  Save \r\n            </v-btn>\r\n          </v-col>        \r\n        </v-row>       \r\n      </v-list-item-content>\r\n    </v-list-item>\r\n  </v-list>\r\n</template>\r\n\r\n<script>\r\nimport dxFormTextInput from '../customcontrols/dxInput/dxFormTextInput/dxFormTextInput'\r\nimport { ADD_COMMENT, UPDATE_COMMENT } from '../../store/actions/comment'\r\nimport { DELETE_COMMENT } from '../../store/actions/comment'\r\n\r\nexport default {\r\n  name: 'comments',\r\n  mounted () {\r\n    this.GetCurrentUser()\r\n  },\r\n  props:{\r\n    comments:{\r\n      type:Array\r\n    },\r\n    parent:{\r\n      type:String\r\n    },\r\n    type:{\r\n      type:Number,\r\n      required:true\r\n    }\r\n  },\r\n  components: {\r\n    dxFormTextInput\r\n  },\r\n  created: function() {\r\n    this.activeUser = localStorage.getItem('currentUser') ? JSON.parse(localStorage.getItem('currentUser')).UserId: '';\r\n  },\r\n  data () {\r\n    return {\r\n      input: false,\r\n      valid:true,\r\n      newComment:'',\r\n      addedComent:'',\r\n      selectedCommentId:-1,\r\n      activeUser:''\r\n    }\r\n  },\r\n  methods:{\r\n    GetCurrentUser: function () {\r\n      this.currentUser = this.$store.getters.currentUser;\r\n    },\r\n    save(){\r\n      if (!this.$refs.form.validate()) {\r\n        return\r\n      }\r\n      \r\n      this._newComment = this.newComment;\r\n\r\n      this.$store.dispatch(ADD_COMMENT, {IsActive:true,type:parseInt(this.type),Question_Answer_Id:parseInt(this.parent),Comment:this._newComment,UserId:JSON.parse(localStorage.getItem('currentUser')).UserId}).then(response => {\r\n        console.log(this.comments)\r\n        // // this.$store.getters.comment\r\n        // this.comments.includes \r\n        this.comments.push({\r\n          Id:this.$store.getters.commentId,\r\n          UserId:JSON.parse(localStorage.getItem('currentUser')).UserId,\r\n          Comment:this._newComment,\r\n          CreateUser:JSON.parse(localStorage.getItem('currentUser')).UserName,\r\n          CreateDate:undefined})\r\n        this.newComment = '';\r\n        this.input = false;\r\n      }).catch(errorCode => { this.$dialog.alert(this.GetErrorMessage(this, errorCode), this.alertoptions) })\r\n    },\r\n     updateComment(comment){\r\n      var newCommentText = $(updateCommentInput).val();\r\n      if(newCommentText.length > 0){\r\n        comment.Comment = newCommentText;\r\n         this.$store.dispatch(UPDATE_COMMENT, {Id:comment.Id,IsActive:true,type:parseInt(this.type),Question_Answer_Id:parseInt(this.parent),Comment:newCommentText,UserId:JSON.parse(localStorage.getItem('currentUser')).UserId}).then(response => {\r\n         this.selectedCommentId=-1;\r\n      }).catch(errorCode => { this.$dialog.alert(this.GetErrorMessage(this, errorCode), this.alertoptions) })\r\n      }\r\n    },\r\n    isUpdateable(comment){\r\n      if(comment.UserId == this.activeUser){\r\n        return true\r\n      }\r\n \r\n      return false;\r\n    },\r\n    isSelected(comment){\r\n      if(comment.Id === this.selectedComment.Id){\r\n        return true\r\n      }\r\n \r\n      return false\r\n    },\r\n      deleteComment : function (commentAnswerId){\r\n      let request = {\r\n        Id: commentAnswerId,\r\n        IsActive:true\r\n      };         \r\n     \r\n     this.$store.dispatch(DELETE_COMMENT, request).then(response => {  \r\n        this.comments.splice(this.comments.findIndex((el) => {\r\n          return el.Id === commentAnswerId\r\n        }),1)\r\n          \r\n      }).catch(errorCode => { this.$dialog.alert(this.GetErrorMessage(this, errorCode), this.alertoptions) })         \r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.comment-content{\r\n  border-bottom: 1px solid #a4a4a4;\r\n  padding-top: 0px;\r\n  padding-bottom: 0px;\r\n  margin-bottom: 5px;\r\n}\r\n.comment-icon{\r\n  font-size: 16px;\r\n  padding-right: 6px;\r\n  padding-bottom: 2px;\r\n  padding-top: 2px;\r\n}\r\n.comment-update{\r\n  cursor: pointer;\r\n}\r\n.comment-update-delete-area{\r\n  display: flow-root;\r\n}\r\n.commentInputforUpdate{\r\n  font-size: 12px;\r\n  height: 25px;\r\n}\r\n</style>\r\n"]}]}