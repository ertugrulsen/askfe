{"remainingRequest":"C:\\Users\\ErtugrulSen\\Desktop\\visual Studio Project\\AskDefinexFrontEnd\\askdefinex-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ErtugrulSen\\Desktop\\visual Studio Project\\AskDefinexFrontEnd\\askdefinex-ui\\src\\components\\partialpages\\company\\CompanyUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ErtugrulSen\\Desktop\\visual Studio Project\\AskDefinexFrontEnd\\askdefinex-ui\\src\\components\\partialpages\\company\\CompanyUser.vue","mtime":1614083118648},{"path":"C:\\Users\\ErtugrulSen\\Desktop\\visual Studio Project\\AskDefinexFrontEnd\\askdefinex-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ErtugrulSen\\Desktop\\visual Studio Project\\AskDefinexFrontEnd\\askdefinex-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\ErtugrulSen\\Desktop\\visual Studio Project\\AskDefinexFrontEnd\\askdefinex-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ErtugrulSen\\Desktop\\visual Studio Project\\AskDefinexFrontEnd\\askdefinex-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBMSVNUX0NPTVBBTllfVVNFUlMsIFNBVkVfVVNFUiwgVVBEQVRFX1VTRVIsIERFTEVURV9VU0VSIH0gZnJvbSAnLi4vLi4vLi4vc3RvcmUvYWN0aW9ucy91c2VyJw0KaW1wb3J0IGR4Rm9ybVRleHRJbnB1dCBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL2N1c3RvbWNvbnRyb2xzL2R4SW5wdXQvZHhGb3JtVGV4dElucHV0L2R4Rm9ybVRleHRJbnB1dCcNCmltcG9ydCBkeEZvcm1DaGVja2JveElucHV0IGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvY3VzdG9tY29udHJvbHMvZHhJbnB1dC9keEZvcm1DaGVja2JveElucHV0L2R4Rm9ybUNoZWNrYm94SW5wdXQnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0NvbXBhbnlVc2VyJywNCiAgcHJvcHM6IHsNCiAgICB2aXNpYmxlOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgcmVxdWlyZWQ6IHRydWUNCiAgICB9DQogIH0sDQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7DQogICAgICBoZWFkZXJzOiBbDQogICAgICAgIHsgdGV4dDogJ05hbWUnLCBhbGlnbjogJ3N0YXJ0JywgdmFsdWU6ICdOYW1lJyB9LA0KICAgICAgICB7IHRleHQ6ICdTdXJuYW1lJywgdmFsdWU6ICdTdXJuYW1lJyB9LA0KICAgICAgICB7IHRleHQ6ICdVc2VyIE5hbWUnLCB2YWx1ZTogJ1VzZXJOYW1lJyB9LA0KICAgICAgICB7IHRleHQ6ICdBY3Rpb25zJywgdmFsdWU6ICdhY3Rpb25zJywgc29ydGFibGU6IGZhbHNlIH0NCiAgICAgIF0sDQogICAgICB2YWxpZDogdHJ1ZSwNCiAgICAgIGNvbXBhbnlJZDogMCwNCiAgICAgIHVzZXJMaXN0OiBbXSwNCiAgICAgIHNob3dGaWVsZHM6IFsnTmFtZScsICdTdXJuYW1lJywgJ1VzZXJOYW1lJ10sDQogICAgICBpc0FkZFVzZXJNb2RhbFZpc2libGU6IGZhbHNlLA0KICAgICAgYWxlcnRvcHRpb25zOiB7DQogICAgICAgIG9rVGV4dDogJ1RhbWFtJw0KICAgICAgfSwNCiAgICAgIGVkaXRlZEluZGV4OiAtMSwNCiAgICAgIHNlbGVjdGVkSXRlbTogew0KICAgICAgICBJZDogMCwNCiAgICAgICAgVXNlck5hbWU6ICcnLA0KICAgICAgICBQYXNzd29yZDogJycsDQogICAgICAgIE5hbWU6ICcnLA0KICAgICAgICBTdXJuYW1lOiAnJywNCiAgICAgICAgSXNBY3RpdmU6IHRydWUNCiAgICAgIH0sDQogICAgICBkZWZhdWx0SXRlbTogew0KICAgICAgICBJZDogMCwNCiAgICAgICAgVXNlck5hbWU6ICcnLA0KICAgICAgICBQYXNzd29yZDogJycsDQogICAgICAgIE5hbWU6ICcnLA0KICAgICAgICBTdXJuYW1lOiAnJywNCiAgICAgICAgSXNBY3RpdmU6IHRydWUNCiAgICAgIH0sDQogICAgICBpc1N1Ym1pdHRlZDogZmFsc2UNCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgZm9ybVRpdGxlICgpIHsNCiAgICAgIHJldHVybiB0aGlzLmVkaXRlZEluZGV4ID09PSAtMSA/ICdOZXcgSXRlbScgOiAnRWRpdCBJdGVtJw0KICAgIH0NCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIFRhYmxlQ29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJy4uLy4uL2N1c3RvbWNvbnRyb2xzL2R4VGFibGVDb21wb25lbnQvZHhUYWJsZUNvbXBvbmVudCcpLA0KICAgIGR4Rm9ybVRleHRJbnB1dCwNCiAgICBkeEZvcm1DaGVja2JveElucHV0DQogIH0sDQogIGNyZWF0ZWQgKCkgew0KICAgIHRoaXMuY29tcGFueUlkID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5jdXJyZW50VXNlciA/IHRoaXMuJHN0b3JlLmdldHRlcnMuY3VycmVudFVzZXIuQ29tcGFueUlkIDogMA0KICAgIHRoaXMubGlzdFVzZXJzKCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGxpc3RVc2VyczogZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIGN0eCA9IHRoaXMNCiAgICAgIGNvbnN0IHJlcXVlc3QgPSB7DQogICAgICAgIGNvbXBhbnlJZDogdGhpcy5jb21wYW55SWQNCiAgICAgIH0NCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKExJU1RfQ09NUEFOWV9VU0VSUywgcmVxdWVzdCkudGhlbigoKSA9PiB7DQogICAgICAgIGlmIChjdHguJHN0b3JlLmdldHRlcnMuY29tcGFueVVzZXJzKSB7DQogICAgICAgICAgY3R4LnVzZXJMaXN0ID0gY3R4LiRzdG9yZS5nZXR0ZXJzLmNvbXBhbnlVc2Vycw0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgICAuY2F0Y2goZXJyb3JDb2RlID0+IHsgdGhpcy4kZGlhbG9nLmFsZXJ0KHRoaXMuR2V0RXJyb3JNZXNzYWdlKHRoaXMsIGVycm9yQ29kZSksIHRoaXMuYWxlcnRvcHRpb25zKSB9KQ0KICAgIH0sDQogICAgc2F2ZU9yVXBkYXRlVXNlcjogZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKCF0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKSkgew0KICAgICAgICByZXR1cm4NCiAgICAgIH0gaWYgKHRoaXMuZWRpdGVkSW5kZXggPiAtMSkgew0KICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVVc2VyKCkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiB0aGlzLnNhdmVVc2VyKCkNCiAgICAgIH0NCiAgICB9LA0KICAgIGFkZFVzZXJDbGlja2VkOiBmdW5jdGlvbiAoKSB7DQogICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIG51bGwpDQogICAgICB0aGlzLmVkaXRlZEluZGV4ID0gLTENCiAgICAgIHRoaXMuaXNBZGRVc2VyTW9kYWxWaXNpYmxlID0gdHJ1ZQ0KICAgIH0sDQogICAgZWRpdFVzZXJDbGlja2VkOiBmdW5jdGlvbiAoaXRlbSkgew0KICAgICAgdGhpcy5lZGl0ZWRJbmRleCA9IHRoaXMudXNlckxpc3QuaW5kZXhPZihpdGVtKQ0KICAgICAgdGhpcy5zZWxlY3RlZEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBpdGVtKQ0KICAgICAgdGhpcy5pc0FkZFVzZXJNb2RhbFZpc2libGUgPSB0cnVlDQogICAgfSwNCiAgICBzYXZlVXNlcjogZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHJlcXVlc3QgPSB7fQ0KICAgICAgT2JqZWN0LmFzc2lnbihyZXF1ZXN0LCB0aGlzLnNlbGVjdGVkSXRlbSkNCiAgICAgIHJlcXVlc3QuQ29tcGFueUlkID0gdGhpcy5jb21wYW55SWQNCg0KICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goU0FWRV9VU0VSLCByZXF1ZXN0KS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgIH0pDQogICAgICAgIC5jYXRjaChlcnJvckNvZGUgPT4geyB0aGlzLiRkaWFsb2cuYWxlcnQodGhpcy5HZXRFcnJvck1lc3NhZ2UodGhpcywgZXJyb3JDb2RlKSwgdGhpcy5hbGVydG9wdGlvbnMpIH0pDQoNCiAgICAgIHRoaXMuaXNBZGRVc2VyTW9kYWxWaXNpYmxlID0gZmFsc2UNCiAgICB9LA0KICAgIHVwZGF0ZVVzZXI6IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciByZXF1ZXN0ID0ge30NCiAgICAgIE9iamVjdC5hc3NpZ24ocmVxdWVzdCwgdGhpcy5zZWxlY3RlZEl0ZW0pDQogICAgICByZXF1ZXN0LkNvbXBhbnlJZCA9IHRoaXMuY29tcGFueUlkDQoNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKFVQREFURV9VU0VSLCByZXF1ZXN0KS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgIH0pDQogICAgICAgIC5jYXRjaChlcnJvckNvZGUgPT4geyB0aGlzLiRkaWFsb2cuYWxlcnQodGhpcy5HZXRFcnJvck1lc3NhZ2UodGhpcywgZXJyb3JDb2RlKSwgdGhpcy5hbGVydG9wdGlvbnMpIH0pDQoNCiAgICAgIHRoaXMuaXNBZGRVc2VyTW9kYWxWaXNpYmxlID0gZmFsc2UNCiAgICB9LA0KDQogICAgZGVsZXRlVXNlckNsaWNrZWQ6IGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgew0KICAgICAgdmFyIHJlcXVlc3QgPSB7IElkOiBpdGVtLklkIH0NCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKERFTEVURV9VU0VSLCByZXF1ZXN0KS50aGVuKCgpID0+IHsNCiAgICAgIH0pDQogICAgICAgIC5jYXRjaChlcnJvckNvZGUgPT4geyB0aGlzLiRkaWFsb2cuYWxlcnQodGhpcy5HZXRFcnJvck1lc3NhZ2UodGhpcywgZXJyb3JDb2RlKSwgdGhpcy5hbGVydG9wdGlvbnMpIH0pDQogICAgfSwNCiAgICBjbG9zZUFkZFVzZXJNb2RhbDogZnVuY3Rpb24gKCkgew0KICAgICAgdGhpcy5pc0FkZFVzZXJNb2RhbFZpc2libGUgPSBmYWxzZQ0KICAgICAgdGhpcy5lZGl0ZWRJbmRleCA9IC0xDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["CompanyUser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CompanyUser.vue","sourceRoot":"src/components/partialpages/company","sourcesContent":["<template>\r\n  <div class=\"card shadow\">\r\n    <div class=\"card-body\">\r\n      <h4 class=\"card-title\">{{GetLabel(this, \"company_company_users\")}}</h4>\r\n\r\n      <TableComponent :items=\"userList\" :headers=\"headers\" :showToolbar=\"true\" :showFooter=\"false\" :showCheckbox=\"false\" :showRowAction=\"true\" :showFields=\"showFields\" @new-item=\"addUserClicked\"  @edit-item=\"editUserClicked\" @delete-item=\"deleteUserClicked\">\r\n        </TableComponent>\r\n        <div v-if=\"isAddUserModalVisible\">\r\n            <v-dialog v-model=\"isAddUserModalVisible\" max-width=\"500px\">\r\n            <v-card>\r\n              <v-card-title>\r\n                <span class=\"headline\">{{formTitle}}</span>\r\n              </v-card-title>\r\n              <v-card-text>\r\n                <v-container>\r\n                  <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\r\n                  <v-col cols=\"12\" sm=\"12\">\r\n                    <dxFormTextInput id=\"company_user_email\" ref=\"userUsernameRef\" v-model=\"selectedItem.UserName\" placeholder=\"company_user_email\" :showLabel=\"true\" labelText=\"company_user_email\" :clear=\"true\" type=\"email\" :isRequired=true />\r\n                  </v-col>\r\n                  <v-col cols=\"12\" sm=\"12\">\r\n                    <dxFormTextInput id=\"company_user_password\" ref=\"userPasswordRef\" v-model=\"selectedItem.Password\" placeholder=\"company_user_password\" :showLabel=\"true\" labelText=\"company_user_password\" type=\"password\" :clear=\"true\" :isRequired=true />\r\n                   </v-col>\r\n                  <v-col cols=\"12\" sm=\"12\">\r\n                    <dxFormTextInput id=\"company_user_name\" ref=\"userNameRef\" v-model=\"selectedItem.Name\" placeholder=\"company_user_name\" :showLabel=\"true\" labelText=\"company_user_name\" :clear=\"true\" :isRequired=true />\r\n                  </v-col>\r\n                  <v-col cols=\"12\" sm=\"12\">\r\n                    <dxFormTextInput id=\"company_user_surname\" ref=\"userSurnameRef\" v-model=\"selectedItem.Surname\" placeholder=\"company_user_surname\" :showLabel=\"true\" labelText=\"company_user_surname\" :clear=\"true\" :isRequired=true />\r\n                  </v-col>\r\n                  <v-col cols=\"12\" sm=\"12\">\r\n                    <dxFormCheckboxInput name=\"Aktif\" :label=\"GetLabel(this, 'active')\" :value=\"selectedItem.IsActive\" :checked=\"true\"/>\r\n                  </v-col>\r\n                  </v-form>\r\n                </v-container>\r\n              </v-card-text>\r\n              <v-card-actions>\r\n                <v-spacer></v-spacer>\r\n                <v-btn\r\n                  color=\"blue darken-1\"\r\n                  text\r\n                  @click=\"closeAddUserModal\"\r\n                >\r\n                  Cancel\r\n                </v-btn>\r\n                 <v-btn :disabled=\"!valid\" class=\"btn mt-4 btn-primary\" color=\"btn-block\" text @click=\"saveOrUpdateUser\">{{GetLabel(this, \"save\")}}</v-btn>\r\n              </v-card-actions>\r\n            </v-card>\r\n          </v-dialog>\r\n\r\n        </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { LIST_COMPANY_USERS, SAVE_USER, UPDATE_USER, DELETE_USER } from '../../../store/actions/user'\r\nimport dxFormTextInput from '../../../components/customcontrols/dxInput/dxFormTextInput/dxFormTextInput'\r\nimport dxFormCheckboxInput from '../../../components/customcontrols/dxInput/dxFormCheckboxInput/dxFormCheckboxInput'\r\n\r\nexport default {\r\n  name: 'CompanyUser',\r\n  props: {\r\n    visible: {\r\n      type: Boolean,\r\n      required: true\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      headers: [\r\n        { text: 'Name', align: 'start', value: 'Name' },\r\n        { text: 'Surname', value: 'Surname' },\r\n        { text: 'User Name', value: 'UserName' },\r\n        { text: 'Actions', value: 'actions', sortable: false }\r\n      ],\r\n      valid: true,\r\n      companyId: 0,\r\n      userList: [],\r\n      showFields: ['Name', 'Surname', 'UserName'],\r\n      isAddUserModalVisible: false,\r\n      alertoptions: {\r\n        okText: 'Tamam'\r\n      },\r\n      editedIndex: -1,\r\n      selectedItem: {\r\n        Id: 0,\r\n        UserName: '',\r\n        Password: '',\r\n        Name: '',\r\n        Surname: '',\r\n        IsActive: true\r\n      },\r\n      defaultItem: {\r\n        Id: 0,\r\n        UserName: '',\r\n        Password: '',\r\n        Name: '',\r\n        Surname: '',\r\n        IsActive: true\r\n      },\r\n      isSubmitted: false\r\n    }\r\n  },\r\n  computed: {\r\n    formTitle () {\r\n      return this.editedIndex === -1 ? 'New Item' : 'Edit Item'\r\n    }\r\n  },\r\n  components: {\r\n    TableComponent: () => import('../../customcontrols/dxTableComponent/dxTableComponent'),\r\n    dxFormTextInput,\r\n    dxFormCheckboxInput\r\n  },\r\n  created () {\r\n    this.companyId = this.$store.getters.currentUser ? this.$store.getters.currentUser.CompanyId : 0\r\n    this.listUsers()\r\n  },\r\n  methods: {\r\n    listUsers: function () {\r\n      var ctx = this\r\n      const request = {\r\n        companyId: this.companyId\r\n      }\r\n      this.$store.dispatch(LIST_COMPANY_USERS, request).then(() => {\r\n        if (ctx.$store.getters.companyUsers) {\r\n          ctx.userList = ctx.$store.getters.companyUsers\r\n        }\r\n      })\r\n        .catch(errorCode => { this.$dialog.alert(this.GetErrorMessage(this, errorCode), this.alertoptions) })\r\n    },\r\n    saveOrUpdateUser: function () {\r\n      if (!this.$refs.form.validate()) {\r\n        return\r\n      } if (this.editedIndex > -1) {\r\n        return this.updateUser()\r\n      } else {\r\n        return this.saveUser()\r\n      }\r\n    },\r\n    addUserClicked: function () {\r\n      this.selectedItem = Object.assign({}, null)\r\n      this.editedIndex = -1\r\n      this.isAddUserModalVisible = true\r\n    },\r\n    editUserClicked: function (item) {\r\n      this.editedIndex = this.userList.indexOf(item)\r\n      this.selectedItem = Object.assign({}, item)\r\n      this.isAddUserModalVisible = true\r\n    },\r\n    saveUser: function () {\r\n      var request = {}\r\n      Object.assign(request, this.selectedItem)\r\n      request.CompanyId = this.companyId\r\n\r\n      this.$store.dispatch(SAVE_USER, request).then(response => {\r\n      })\r\n        .catch(errorCode => { this.$dialog.alert(this.GetErrorMessage(this, errorCode), this.alertoptions) })\r\n\r\n      this.isAddUserModalVisible = false\r\n    },\r\n    updateUser: function () {\r\n      var request = {}\r\n      Object.assign(request, this.selectedItem)\r\n      request.CompanyId = this.companyId\r\n\r\n      this.$store.dispatch(UPDATE_USER, request).then(response => {\r\n      })\r\n        .catch(errorCode => { this.$dialog.alert(this.GetErrorMessage(this, errorCode), this.alertoptions) })\r\n\r\n      this.isAddUserModalVisible = false\r\n    },\r\n\r\n    deleteUserClicked: function (item, index) {\r\n      var request = { Id: item.Id }\r\n      this.$store.dispatch(DELETE_USER, request).then(() => {\r\n      })\r\n        .catch(errorCode => { this.$dialog.alert(this.GetErrorMessage(this, errorCode), this.alertoptions) })\r\n    },\r\n    closeAddUserModal: function () {\r\n      this.isAddUserModalVisible = false\r\n      this.editedIndex = -1\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}